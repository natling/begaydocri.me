<!DOCTYPE html>
<html>

<head>
  <title>ｂｅ　ｇａｙ　ｄｏ　ｃｒｉｍｅ</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="favicon.png"/>
  <style>
    body {
      margin: 0px;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: black;
    }

    #vortex {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    p {
      margin: 0px;
      font: italic bold 40pt 'Courier';
      color: white;
      mix-blend-mode: difference;
      text-shadow: 3px 3px 1px gray;
    }
  </style>
</head>

<body>
  <div id="vortex">
    <p>be gay</p>
    <p>do crime</p>
  </div>
</body>

<script>
  const rainbow = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet'];

  const randomFloat = (min, max) => Math.random() * (max - min) + min;

  const beGay = () => {
    const vortex = document.getElementById('vortex');

    rainbow.unshift(rainbow.pop());
    vortex.style.background = 'radial-gradient('+ rainbow.join(', ') + ')';
    setTimeout(beGay, 80);
  }

  const doCrime = () => {
    const style = element => {
      let translateX = randomFloat(...[-1, 1].map(n => n * window.innerWidth  * 0.2));
      let translateY = randomFloat(...[-1, 1].map(n => n * window.innerHeight * 0.2));
      let skewX      = randomFloat(...[-1, 1].map(n => n * 36));
      let skewY      = randomFloat(...[-1, 1].map(n => n * 36));
      let scaleX     = randomFloat(1, 3);
      let scaleY     = randomFloat(1, 6);

      translateX = 'translateX(' + translateX + 'px)';
      translateY = 'translateY(' + translateY + 'px)';
      skewX      = 'skewX('      + skewX      + 'deg)';
      skewY      = 'skewY('      + skewY      + 'deg)';
      scaleX     = 'scaleX('     + scaleX     + ')';
      scaleY     = 'scaleY('     + scaleY     + ')';

      element.style.transform = [translateX, translateY, skewX, skewY, scaleX, scaleY].join(' ');

      const letterSpacing = randomFloat(5, 15);
      element.style.letterSpacing = letterSpacing + 'px';
    }

    const instructions = Array.from(document.getElementsByTagName('p'));

    instructions.forEach(element => {
      const cycle = () => {
        style(element);
        const delay = randomFloat(1, 3);
        element.style.transition = ['transform', 'letter-spacing'].map(property => property + ' ' + delay + 's linear');
        setTimeout(cycle, delay * 1000);
      };

      style(element);
      setTimeout(cycle, 0);
    });
  }

  beGay();
  doCrime();
</script>

</html>